<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated Page Quality Checker - Nika Appliance Repair</title>
    <style>
        body {
            font-family: 'Rubik', sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .checker-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2196F3;
            font-family: 'Fredoka', cursive;
            text-align: center;
        }
        .input-section {
            background: #E3F2FD;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .check-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
        }
        .check-section h2 {
            color: #1A237E;
            margin-top: 0;
        }
        .check-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .check-pass {
            background: #C8E6C9;
            color: #2E7D32;
        }
        .check-fail {
            background: #FFCDD2;
            color: #C62828;
        }
        .check-warning {
            background: #FFF9C4;
            color: #F57F17;
        }
        .score-display {
            text-align: center;
            font-size: 48px;
            font-weight: bold;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .score-excellent {
            background: #4CAF50;
            color: white;
        }
        .score-good {
            background: #FFD600;
            color: #1A237E;
        }
        .score-poor {
            background: #E91E63;
            color: white;
        }
        .recommendations {
            background: #FFF3E0;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        button {
            background: #2196F3;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
        }
        button:hover {
            background: #1976D2;
        }
        textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            border: 2px solid #E0E0E0;
            border-radius: 5px;
            font-family: monospace;
        }
        .guide-reference {
            font-size: 12px;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="checker-container">
        <h1>üîç Automated Page Quality Checker</h1>
        
        <div class="input-section">
            <h2>Paste Your Page HTML</h2>
            <textarea id="pageContent" placeholder="Paste your complete HTML here..."></textarea>
            <p>Page Type: 
                <select id="pageType">
                    <option value="service">Service Page</option>
                    <option value="brand">Brand Page</option>
                    <option value="location">Location Page</option>
                    <option value="homepage">Homepage</option>
                </select>
            </p>
            <button onclick="checkPage()">Analyze Page Quality</button>
        </div>
        
        <div id="results" style="display:none;">
            <!-- SEO Checks -->
            <div class="check-section">
                <h2>üîç SEO Requirements</h2>
                <span class="guide-reference">Reference: ADVANCED-SEO-GUIDE.md</span>
                <div id="seo-checks"></div>
            </div>
            
            <!-- Marketing & Psychology -->
            <div class="check-section">
                <h2>üß† Marketing & Psychology</h2>
                <span class="guide-reference">Reference: MARKETING-PSYCHOLOGY-GUIDE.md</span>
                <div id="marketing-checks"></div>
            </div>
            
            <!-- Technical Requirements -->
            <div class="check-section">
                <h2>‚öôÔ∏è Technical Requirements</h2>
                <span class="guide-reference">Reference: CONTEXT-ENGINEERING-GUIDE.md</span>
                <div id="technical-checks"></div>
            </div>
            
            <!-- Conversion Elements -->
            <div class="check-section">
                <h2>üí∞ Conversion Optimization</h2>
                <span class="guide-reference">Reference: PAGE-QUALITY-CHECKLIST.md</span>
                <div id="conversion-checks"></div>
            </div>
            
            <div id="score-display" class="score-display"></div>
            
            <div id="recommendations" class="recommendations"></div>
        </div>
    </div>
    
    <script>
        function checkPage() {
            const content = document.getElementById('pageContent').value;
            const pageType = document.getElementById('pageType').value;
            
            if (!content) {
                alert('Please paste your HTML content');
                return;
            }
            
            // Parse HTML
            const parser = new DOMParser();
            const doc = parser.parseFromString(content, 'text/html');
            
            // Initialize results
            const results = {
                seo: [],
                marketing: [],
                technical: [],
                conversion: []
            };
            
            // SEO Checks (from ADVANCED-SEO-GUIDE.md)
            checkSEO(doc, content, pageType, results.seo);
            
            // Marketing Checks (from MARKETING-PSYCHOLOGY-GUIDE.md)
            checkMarketing(doc, content, results.marketing);
            
            // Technical Checks (from CONTEXT-ENGINEERING-GUIDE.md)
            checkTechnical(doc, content, results.technical);
            
            // Conversion Checks (from PAGE-QUALITY-CHECKLIST.md)
            checkConversion(doc, content, results.conversion);
            
            // Display results
            displayResults(results);
        }
        
        function checkSEO(doc, content, pageType, results) {
            // Title tag checks
            const title = doc.querySelector('title');
            if (title) {
                const titleLength = title.textContent.length;
                if (titleLength >= 50 && titleLength <= 60) {
                    results.push({status: 'pass', message: `Title length: ${titleLength} chars ‚úì`});
                } else {
                    results.push({status: 'fail', message: `Title length: ${titleLength} chars (should be 50-60)`});
                }
                
                // Check for location in title
                if (title.textContent.includes('Toronto')) {
                    results.push({status: 'pass', message: 'Title contains location ‚úì'});
                } else {
                    results.push({status: 'fail', message: 'Title missing location (Toronto)'});
                }
            }
            
            // Meta description checks
            const metaDesc = doc.querySelector('meta[name="description"]');
            if (metaDesc) {
                const descLength = metaDesc.content.length;
                if (descLength >= 150 && descLength <= 160) {
                    results.push({status: 'pass', message: `Meta description: ${descLength} chars ‚úì`});
                } else {
                    results.push({status: 'warning', message: `Meta description: ${descLength} chars (should be 150-160)`});
                }
                
                // Check for phone number
                if (metaDesc.content.includes('437-747-6737')) {
                    results.push({status: 'pass', message: 'Meta contains phone number ‚úì'});
                } else {
                    results.push({status: 'fail', message: 'Meta missing phone: 437-747-6737'});
                }
            }
            
            // H1 check
            const h1s = doc.querySelectorAll('h1');
            if (h1s.length === 1) {
                results.push({status: 'pass', message: 'Single H1 tag ‚úì'});
            } else {
                results.push({status: 'fail', message: `${h1s.length} H1 tags (should be 1)`});
            }
            
            // Word count check
            const wordCount = content.replace(/<[^>]*>/g, '').split(/\s+/).length;
            const expectedWords = {
                'service': 1200,
                'brand': 800,
                'location': 1000,
                'homepage': 1500
            };
            
            if (wordCount >= expectedWords[pageType]) {
                results.push({status: 'pass', message: `Word count: ${wordCount} ‚úì`});
            } else {
                results.push({status: 'warning', message: `Word count: ${wordCount} (target: ${expectedWords[pageType]}+)`});
            }
            
            // Schema markup check
            if (content.includes('application/ld+json')) {
                results.push({status: 'pass', message: 'Schema markup present ‚úì'});
            } else {
                results.push({status: 'fail', message: 'Schema markup missing'});
            }
            
            // Internal links check
            const internalLinks = doc.querySelectorAll('a[href^="/"]').length;
            if (internalLinks >= 10) {
                results.push({status: 'pass', message: `Internal links: ${internalLinks} ‚úì`});
            } else {
                results.push({status: 'warning', message: `Internal links: ${internalLinks} (target: 10+)`});
            }
        }
        
        function checkMarketing(doc, content, results) {
            // Urgency triggers
            const urgencyWords = ['now', 'today', 'limited', 'expires', 'hurry', 'last chance'];
            const urgencyCount = urgencyWords.filter(word => 
                content.toLowerCase().includes(word)
            ).length;
            
            if (urgencyCount >= 3) {
                results.push({status: 'pass', message: `Urgency triggers: ${urgencyCount} ‚úì`});
            } else {
                results.push({status: 'warning', message: `Urgency triggers: ${urgencyCount} (need more)`});
            }
            
            // Social proof
            if (content.includes('testimonial') || content.includes('review')) {
                results.push({status: 'pass', message: 'Social proof present ‚úì'});
            } else {
                results.push({status: 'fail', message: 'No testimonials/reviews found'});
            }
            
            // Trust elements
            const trustWords = ['licensed', 'insured', 'warranty', 'guarantee', 'certified'];
            const trustCount = trustWords.filter(word => 
                content.toLowerCase().includes(word)
            ).length;
            
            if (trustCount >= 3) {
                results.push({status: 'pass', message: `Trust signals: ${trustCount} ‚úì`});
            } else {
                results.push({status: 'warning', message: `Trust signals: ${trustCount} (need more)`});
            }
            
            // Color psychology
            if (content.includes('#4CAF50')) {
                results.push({status: 'pass', message: 'Green CTAs for positive action ‚úì'});
            }
            if (content.includes('#E91E63')) {
                results.push({status: 'pass', message: 'Pink for urgency elements ‚úì'});
            }
            
            // Value proposition
            if (content.includes('same-day') || content.includes('same day')) {
                results.push({status: 'pass', message: 'Same-day value prop ‚úì'});
            }
            if (content.includes('$40')) {
                results.push({status: 'pass', message: 'Discount offer present ‚úì'});
            }
        }
        
        function checkTechnical(doc, content, results) {
            // Phone number count
            const phoneCount = (content.match(/437-747-6737/g) || []).length;
            if (phoneCount >= 5) {
                results.push({status: 'pass', message: `Phone appears ${phoneCount} times ‚úì`});
            } else {
                results.push({status: 'fail', message: `Phone appears ${phoneCount} times (need 5+)`});
            }
            
            // Font check
            if (content.includes('Fredoka') && content.includes('Rubik')) {
                results.push({status: 'pass', message: 'Correct fonts loaded ‚úì'});
            } else {
                results.push({status: 'fail', message: 'Missing required fonts'});
            }
            
            // Mobile viewport
            if (doc.querySelector('meta[name="viewport"]')) {
                results.push({status: 'pass', message: 'Mobile viewport set ‚úì'});
            }
            
            // Canonical URL
            if (doc.querySelector('link[rel="canonical"]')) {
                results.push({status: 'pass', message: 'Canonical URL present ‚úì'});
            }
        }
        
        function checkConversion(doc, content, results) {
            // CTA count
            const ctaCount = doc.querySelectorAll('a[href*="tel:"], a[href="#book"], button[type="submit"]').length;
            if (ctaCount >= 4) {
                results.push({status: 'pass', message: `CTAs: ${ctaCount} ‚úì`});
            } else {
                results.push({status: 'warning', message: `CTAs: ${ctaCount} (target: 4+)`});
            }
            
            // Form presence
            if (doc.querySelector('form')) {
                results.push({status: 'pass', message: 'Booking form present ‚úì'});
                
                // Form field count
                const fields = doc.querySelectorAll('form input, form select, form textarea').length;
                if (fields <= 6) {
                    results.push({status: 'pass', message: `Form fields: ${fields} ‚úì`});
                } else {
                    results.push({status: 'warning', message: `Form fields: ${fields} (max: 6)`});
                }
            }
            
            // Above fold CTA
            const firstCTA = doc.querySelector('a[href*="tel:"], a[href="#book"]');
            if (firstCTA) {
                results.push({status: 'pass', message: 'CTA in hero section ‚úì'});
            }
        }
        
        function displayResults(results) {
            document.getElementById('results').style.display = 'block';
            
            // Display individual checks
            displayChecks('seo-checks', results.seo);
            displayChecks('marketing-checks', results.marketing);
            displayChecks('technical-checks', results.technical);
            displayChecks('conversion-checks', results.conversion);
            
            // Calculate score
            const allChecks = [...results.seo, ...results.marketing, ...results.technical, ...results.conversion];
            const passed = allChecks.filter(c => c.status === 'pass').length;
            const total = allChecks.length;
            const score = Math.round((passed / total) * 100);
            
            // Display score
            const scoreDisplay = document.getElementById('score-display');
            scoreDisplay.textContent = `Quality Score: ${score}%`;
            scoreDisplay.className = 'score-display ' + 
                (score >= 90 ? 'score-excellent' : score >= 75 ? 'score-good' : 'score-poor');
            
            // Recommendations
            const failed = allChecks.filter(c => c.status === 'fail');
            const warnings = allChecks.filter(c => c.status === 'warning');
            
            let recommendations = '<h3>üìã Recommendations</h3>';
            if (failed.length > 0) {
                recommendations += '<h4>Critical Issues:</h4><ul>';
                failed.forEach(item => {
                    recommendations += `<li>${item.message}</li>`;
                });
                recommendations += '</ul>';
            }
            if (warnings.length > 0) {
                recommendations += '<h4>Improvements:</h4><ul>';
                warnings.forEach(item => {
                    recommendations += `<li>${item.message}</li>`;
                });
                recommendations += '</ul>';
            }
            
            document.getElementById('recommendations').innerHTML = recommendations;
        }
        
        function displayChecks(elementId, checks) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            
            checks.forEach(check => {
                const div = document.createElement('div');
                div.className = `check-item check-${check.status}`;
                div.innerHTML = `
                    <span>${check.status === 'pass' ? '‚úì' : check.status === 'fail' ? '‚úó' : '‚ö†'}</span>
                    <span>${check.message}</span>
                `;
                container.appendChild(div);
            });
        }
    </script>
</body>
</html>